<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SECURE TRANSMISSION</title>
<style>
    body {
        margin: 0;
        background: #000;
        color: #00ff41;
        font-family: "Courier New", monospace;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        overflow: hidden;
    }

    #container {
        border: 2px solid #333;
        padding: 40px;
        background: #050505;
        box-shadow: 0 0 20px rgba(0, 255, 65, 0.1);
        text-align: center;
        width: 80%;
        max-width: 600px;
        position: relative;
    }

    h2 {
        margin: 0 0 10px 0;
        text-shadow: 0 0 5px #00ff41;
        font-size: 1.5rem;
        letter-spacing: 2px;
    }

    .sub-header {
        font-size: 0.8rem;
        color: #008F11;
        margin-bottom: 20px;
        border-bottom: 1px solid #333;
        padding-bottom: 10px;
    }

    /* CANVAS VISUALIZER */
    #audio-canvas {
        width: 100%;
        height: 150px;
        background: #001100;
        border: 1px solid #00ff41;
        box-shadow: inset 0 0 20px rgba(0, 255, 65, 0.2);
        margin-bottom: 30px;
    }

    .btn {
        background: transparent;
        color: #00ff41;
        border: 2px solid #00ff41;
        padding: 15px 30px;
        font-family: inherit;
        font-size: 1.2rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.2s;
        text-transform: uppercase;
        position: relative;
        overflow: hidden;
    }

    .btn:hover {
        background: #00ff41;
        color: #000;
        box-shadow: 0 0 30px #00ff41;
    }

    .btn:disabled {
        border-color: #333;
        color: #333;
        cursor: not-allowed;
        box-shadow: none;
        background: transparent;
    }

    #status {
        margin-top: 20px;
        font-size: 0.9rem;
        color: #555;
        min-height: 1.2em;
        font-weight: bold;
    }

    /* CRT Scanline */
    .scanlines {
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        background: repeating-linear-gradient(
            transparent 0px,
            transparent 2px,
            rgba(0, 255, 65, 0.05) 3px
        );
        pointer-events: none;
        z-index: 10;
    }

    /* Grid overlay for tech feel */
    .grid-overlay {
        position: absolute;
        top: 0; left: 0; width: 100%; height: 100%;
        background-image: 
            linear-gradient(rgba(0, 255, 65, 0.1) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0, 255, 65, 0.1) 1px, transparent 1px);
        background-size: 20px 20px;
        opacity: 0.3;
        pointer-events: none;
    }
</style>
</head>
<body>

<div class="scanlines"></div>

<div id="container">
    <div class="grid-overlay"></div>
    <h2>AUDIO DECRYPTOR</h2>
    <!-- Updated Label -->
    <div class="sub-header">FREQ: 992.45 MHz // ENCRYPTION: V2-SECURE</div>
    
    <canvas id="audio-canvas" width="600" height="150"></canvas>

    <button id="playBtn" class="btn">INITIATE PLAYBACK</button>
    
    <div id="status">Stream Offline</div>
</div>

<script>
    const playBtn = document.getElementById('playBtn');
    const statusEl = document.getElementById('status');
    const canvas = document.getElementById('audio-canvas');
    const ctx = canvas.getContext('2d');

    let isPlaying = false;
    let animationId = null;
    let time = 0;

    // The Sequence to Speak
    const message = "The first two steps lift you to the sky, Look above twice to start the journey. Choose the meaning of “above” that you almost chose, but didn’t —and count only that. You found the first clue, but that is not all, The next is waiting on Sticky Note Wall";

    // ---------------- CANVAS ANIMATION ----------------
    function draw() {
        // Clear canvas
        ctx.fillStyle = 'rgba(0, 17, 0, 0.2)'; // Fade effect
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        ctx.lineWidth = 2;
        ctx.strokeStyle = '#00ff41';
        ctx.shadowBlur = 10;
        ctx.shadowColor = '#00ff41';
        ctx.beginPath();

        const cy = canvas.height / 2;
        const cx = canvas.width;

        for (let x = 0; x < cx; x++) {
            let y = 0;
            
            if (isPlaying) {
                // Active Voice Simulation (Complex Sine Wave)
                // Combine multiple sine waves + random noise to simulate voice spectrum
                const noise = (Math.random() - 0.5) * 10;
                const freq1 = Math.sin(x * 0.05 + time * 0.5);
                const freq2 = Math.sin(x * 0.1 + time * 2);
                
                // Envelope (makes it look like a packet of sound)
                const envelope = Math.sin(time * 0.1) * 30 + 30; 
                
                y = cy + (freq1 * freq2 * envelope) + noise;
            } else {
                // Flatline / Standby (Small jitter)
                y = cy + (Math.random() - 0.5) * 2; 
            }

            if (x === 0) ctx.moveTo(x, y);
            else ctx.lineTo(x, y);
        }

        ctx.stroke();
        ctx.shadowBlur = 0; // Reset shadow for performance

        // Draw Center Line
        ctx.strokeStyle = 'rgba(0, 255, 65, 0.2)';
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(0, cy);
        ctx.lineTo(cx, cy);
        ctx.stroke();

        time += 0.5;
        animationId = requestAnimationFrame(draw);
    }

    // Start Idle Animation
    draw();

    // ---------------- AUDIO HANDLER ----------------
    playBtn.addEventListener('click', () => {
        if (isPlaying) return;
        
        const utterance = new SpeechSynthesisUtterance(message);
        const voices = speechSynthesis.getVoices();
        let voice = null;

        // ============================================================
        //  VOICE OPTION 1: FEMALE (Currently Commented Out)
        // ============================================================
        /*
        utterance.pitch = 1.2; 
        utterance.rate = 0.9;
        utterance.volume = 1;

        voice = voices.find(v => 
            v.name.includes('Google US English') || 
            v.name.includes('Zira') || 
            v.name.includes('Samantha') ||
            v.name.includes('Female')
        );
        */

        // ============================================================
        //  VOICE OPTION 2: MALE (Currently Active)
        // ============================================================
        
        utterance.pitch = 0.8; 
        utterance.rate = 0.85;
        utterance.volume = 1;

        voice = voices.find(v => 
            v.name.includes('David') || 
            v.name.includes('Male') ||
            v.name.includes('Google UK English Male')
        );
        
        // ============================================================

        // Fallback if specific voice preference not found
        if (!voice) voice = voices.find(v => v.lang.includes('en'));
        if (voice) utterance.voice = voice;

        utterance.onstart = () => {
            isPlaying = true;
            playBtn.disabled = true;
            playBtn.textContent = "TRANSMITTING...";
            statusEl.textContent = ">> DECODING AUDIO PACKET <<";
            statusEl.style.color = "#00ff41";
            // Flash canvas border
            canvas.style.borderColor = "#fff";
            setTimeout(() => canvas.style.borderColor = "#00ff41", 200);
        };

        utterance.onend = () => {
            isPlaying = false;
            playBtn.disabled = false;
            playBtn.textContent = "REPLAY TRANSMISSION";
            statusEl.textContent = ">> END OF STREAM <<";
            statusEl.style.color = "#555";
        };

        window.speechSynthesis.speak(utterance);
    });

    // Force load voices fix
    window.speechSynthesis.onvoiceschanged = () => {};
</script>

</body>
</html>